<script type="text/javascript">

jQuery(document).ready(function() {
    jQuery("#<%= @place %>").participantTable({
        caption : '<%= t @caption %>',
        selectNotifyMethod : <%= @selectNotifyMethod %>,
        selectAllNotifyMethod : <%= @selectAllNotifyMethod %>,
        clearNotifyMethod : <%= @clearNotifyMethod %>,
        loadNotifyMethod : <%= @loadNotifyMethod %>,
        root_url : "<%= @root_url %>",
        baseUrl : "<%= @baseUrl %>",
        getGridData : "<%= @getGridData %>",
        
        delayed : <%= @delayed %>,

        name : [true, '<%= t "name"%>'],       
        invite_status : [<%= @invite_status%>, '<%= t "invitation-status"%><i class="glyphicon glyphicon-info-sign bpopover" title="<%= t "invitation-status" %>" data-container="body" data-trigger="hover" data-placement="right" data-toggle="popover" data-content="<%= (t "invitation-status-help").html_safe %>"></i>' ],
        invite_category : [<%= @invite_category%>, '<%= t "invitation-category-abbreviated"%>' ],
        acceptance_status : [<%= @acceptance_status%>, '<%= t "acceptance"%>'],
        organization : [<%= @organization%>, '<%= t "organization"%>'],
        has_survey : [<%= @has_survey%>, '<%= t "survey"%>'],
        reg_type   : [<%= @reg_type%>, '<%= t "reg-type"%>'],

        mailings : [<%= @includeMailings%>, '<%= t "mailings"%>' ],
        mail_history : [<%= @includeMailHistory%>, '<%= t "mail-history"%>' ],
        
        view : <%= @view %>,
        search : <%= @search %>,
        del : <%= @del %>,
        edit : <%= @edit %>,
        add : <%= @add %>,
        
        refresh : <%= @refresh %>,
        controlDiv : "<%= @controlDiv %>",
        pager : "#<%= @pager %>",
        
        multiselect : <%= @multiselect %>,
        multiboxonly : <%= @multiboxonly %>,
        hide_select_all : <%= @hide_select_all %>,
        
        extraClause : "<%= @extraClause %>",
        includeMailings : <%= @includeMailings %>,
        includeMailHistory : <%= @includeMailHistory %>,
        
        onlySurveyRespondents : <%= @onlySurveyRespondents %>,
        
        extra_button : <%= @extra_button %>,
        extra_button_title : "<%= @extra_button_title %>",
        extra_modal_action : <%= @extra_modal_action %>,
        
        sortname : 'people.last_name',
        
        modelType : <%= @modelType %>,
        modelTemplate : "<%= @modelTemplate %>",
        showControls : <%= @showControls %>,
        
        modal_create_title : '<%= t "create-participant" %>',
        modal_edit_title : '<%= t "edit-participant" %>',

        confirm_content     : '<%= t "delete-selected-data" %>',
        confirm_title       : '<%= t "delete-confirmation" %>',
        
        translations : {
                participant_email_more: '<%= t ('participant-email-more') %>',
                invite_status_not_set: '<%= t ('person-invitation-not-set') %>',
                invite_status_do_not_invite: '<%= t ('person-invitation-do-not-invite') %>',
                invite_status_potential_invite: '<%= t ('person-invitation-potential-invite') %>',
                invite_status_invite_pending: '<%= t ('person-invitation-invite-pending') %>',
                invite_status_invited: '<%= t ('person-invitation-invite-invited') %>',
                invite_status_volunteered: '<%= t ('person-invitation-volunteered') %>',
                invite_not_set: '<%= t ('person-invitation-not-set') %>',
                acceptance_unknown: '<%= t ('person-acceptance-unknown') %>',
                acceptance_probable: '<%= t ('person-acceptance-probable') %>',
                acceptance_accepted: '<%= t ('person-acceptance-accepted') %>',
                acceptance_declined: '<%= t ('person-acceptance-declined') %>'
            }
    });
    
    $('#collapseButton').click(function(ev) {
        $('#right-panel-action-group').attr('class','col-fixed-small'); 
        $('#right-bar-action-group').css('display','none'); 
        $('#participant-detail-div').attr('class','col-md-12 col-right-offset-small left-jqgrid'); 
        $('#participants').participantTable('resize_grid'); 
        $('#expandButton').css('display','block');
        $('#collapseButton').css('display','none');
        $('#participant-tabs').tabdrop('layout');  
              
    });
    
    $('#expandButton').click(function(ev) {
        $('#right-panel-action-group').attr('class','col-md-3 col-fixed-large hidden-sm hidden-xs'); 
        $('#right-bar-action-group').css('display','block'); 
        $('#participant-detail-div').attr('class','col-md-9 left-jqgrid'); 
        $('#participants').participantTable('resize_grid'); 
        $('#expandButton').css('display','none');
        $('#collapseButton').css('display','block');        
        $('#participant-tabs').tabdrop('layout');
    });
});

    function resizeSideBar () {
        var bottomBarHeight = $('#grenadine-footer').height();
        var logoBarHeight = $('#logo-bar').height();
        var menuBarHeight = $('#app-menu-div').height();
        var browserViewport = $( window ).height();
        var menuSeparatorDIV = $('#menu-separator-div').height();
        var desiredHeight = browserViewport - logoBarHeight - menuBarHeight - bottomBarHeight;
        $("#right-panel-action-group").css('height',desiredHeight);
    };
    
    $( window ).resize(function() {
        resizeSideBar();
    });
    
</script>
