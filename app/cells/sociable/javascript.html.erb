
<script id="sociable-module" type="text/javascript">
  var Sociable = (function(Backbone) {

    function generateSchema() {
      var args = arguments;
      var schema = {};

      for (i in args) {
        var arg = args[i];

        switch (arg) {
          case "facebook": {
            schema = $.extend(schema, {
              facebook : { 
                type : 'Text', title : '<i class="fa fa-facebook-square" aria-hidden="true"></i> <%= t "participant-facebook-url" %>',
                validators : ['url']
              }
            });
          };
          break;

          case "twitterinfo":
          case "twitter": {
            var twitter = {};
            twitter[arg] = { 
              type : 'Text', 
              title : '<i class="fa fa-twitter-square" aria-hidden="true"></i> <%= t "participant-twitter-handle" %>',
              hint: '<%= (j t('twitter-hint')).html_safe %>',
              validators: [{
                type: 'regexp',
                regexp: /(^@)?(\w){1,15}$/,
                message: '<%= (j t "please-use-twitter-form").html_safe %>',
              }]
            };
            schema = $.extend(schema, twitter);
          };
          break;
          
          case "linkedin": {
            schema = $.extend(schema, {
              linkedin : { 
                type : 'Text', 
                title : '<i class="fa fa-linkedin-square" aria-hidden="true"></i> <%= t "participant-linkedin-handle" %>',
                validators : ['url']
              }
            });
          };
          break;

          case "youtube": {
            schema = $.extend(schema, {
              youtube : { 
                type : 'Text', 
                title : '<i class="fa fa-youtube-square" aria-hidden="true"></i> <%= t "participant-youtube-handle" %>',
                validators : ['url']
              }
            });
          };
          break;

          case "twitch": {
            schema = $.extend(schema, {
              twitch : { 
                type : 'Text', 
                title : '<i class="fa fa-twitch" aria-hidden="true"></i> <%= t "participant-twitch-handle" %>',
                validators : ['url']
              }
            });
          };
          break;

          case "instagram": {
            schema = $.extend(schema, {
              instagram : { 
                type : 'Text', 
                title : '<i class="fa fa-instagram" aria-hidden="true"></i> <%= t "participant-instagram-handle" %>',
                validators : ['url']
              }
            });
          };
          break;

          case "flickr": {
            schema = $.extend(schema, {
              flickr : { 
                type : 'Text', 
                title : '<i class="fa fa-flickr" aria-hidden="true"></i> <%= t "participant-flickr-handle" %>',
                validators : ['url']
              }
            });
          };
          break;

          case "reddit": {
            schema = $.extend(schema, {
              reddit : { 
                type : 'Text', 
                title : '<i class="fa fa-reddit-square" aria-hidden="true"></i> <%= t "participant-reddit-handle" %>',
                validators : ['url']
              }
            });
          };
          break;

          case "othersocialmedia": {
            schema = $.extend(schema, {
              othersocialmedia : { 
                type : 'Text', 
                title : '<%= t "other-social-media" %>',
                validators : ['url'], 
                help: '<%= j t "other-social-media-url" %>'
              }
            });
          };
          break;

          case "website": {
            var addition = {};
            addition[arg] = { 
              type : 'Text', 
              title : '<i class="fa fa-globe" aria-hidden="true"></i> <%= t "participant-url" %>' ,
              validators : ['url'], 
              help: '<%= j t "personal-web-site-url" %>',
            };
            schema = $.extend(schema, addition);
          };
          break;

          default: {
            console.log("Unknown social platform: " + arg);
          };
        };
      };

      return schema;
    };

    return {
      generateSchema : generateSchema
    };
  })(Backbone);
</script>
